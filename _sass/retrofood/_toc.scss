/* =========================================================
   TOC (sidebar + article) — compact, newspaper-themed
   ========================================================= */

.rf-toc {
  border: 2px solid var(--rule);
  background: var(--paper2);

  /* KEY: make TOC a column so the list can be the scroll region */
  display: flex;
  flex-direction: column;

  /* hard stop: never paint outside */
  overflow: hidden;
}

/* Header mirrors the rail header, but slimmer */
.rf-toc-head {
  padding: 8px 10px 7px;
  border-bottom: 2px solid var(--rule);
  flex: 0 0 auto;
}

.rf-toc-kicker {
  font-family: var(--font-mono);
  font-weight: 900;
  font-size: 11px;
  line-height: 1;
  letter-spacing: .18em;
  text-transform: uppercase;
  color: var(--muted);
}

/* Tight list — minimal vertical footprint */
.rf-toc-list {
  margin: 0;
  padding: 8px 10px 10px;
  list-style: none;
  display: grid;
  gap: 2px;

  /* KEY: list becomes the scrollable flex child */
  flex: 1 1 auto;
  min-height: 0;

  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-gutter: stable;
  overscroll-behavior: contain;
}

/* Link rows: compact + underline rule */
.rf-toc-item a {
  display: block;
  min-width: 0;
  padding: 4px 2px;
  color: inherit;
  text-decoration: none;

  font-weight: 900;
  font-size: 12px;
  line-height: 1.15;
  letter-spacing: .08em;
  text-transform: uppercase;

  border-bottom: 2px solid rgba(0,0,0,.12);

  /* allow wrap without blowing out the box */
  white-space: normal;
  overflow-wrap: anywhere;
  word-break: break-word;
  hyphens: auto;
}

.rf-toc-item a:hover {
  border-bottom-color: rgba(0,0,0,.35);
}

.rf-toc-item a:focus-visible {
  outline: 3px solid rgba(0,0,0,.55);
  outline-offset: 2px;
  border-bottom-color: rgba(0,0,0,.55);
}

/* h3: indented + slightly softer */
.rf-toc-h3 a {
  padding-left: 12px;
  font-size: 11px;
  letter-spacing: .10em;
  opacity: .9;
}

/* Sidebar behavior */
.rf-toc--side {
  margin: 0;
}

/* Desktop: the TOC box itself is height-limited by the sticky sidebar stack;
   list scrolls because it's the flex child. No max-height needed here. */

/* Mobile: sidebar isn’t constrained; let list flow naturally */
@media (max-width: 820px) {
  .rf-toc {
    overflow: visible;
  }
  .rf-toc-list {
    overflow: visible;
  }
}
